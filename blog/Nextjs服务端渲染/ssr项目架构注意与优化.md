既然选择 next，当然是为了能够服务端渲染，能够 seo，但是 ssr 的缺点也需要注意。

ssr 需要在服务端进行接口请求，然后使用请求到的数据渲染出 html。这里会产生一个问题，就是如果服务端请求的接口太多，会增加服务器压力，也会让前端页面访问速度变慢。
最合理的 ssr 方案是，需要 seo 的部分接口 ssr，剩下的接口在客户端请求，这样既满足 seo 需求，又可以提高访问速度。

不过这样会增加前端代码复杂度，例如，页面异步渲染的数据一开始是 null，需要组件设置空数据占位和 Loading 动画。

还有一点需要注意，ssr 的数据是不需要登陆的！！ssr 的数据是不需要登陆的！！ssr 的数据是不需要登陆的！！重要的事情说三次。

为什么这一点这么重要，因为当前主流的方案是，token 放在 localstorage 中而不是 cookie，所以服务端渲染时是拿不到 token 的，转变思路思考一下，服务端渲染的内容是给搜索引擎看的，而搜索引擎不可能会登录！所以服务端渲染的接口必然是完全开放的！在客户端通过 js 携带 token 访问来异步初始化的内容是权益相关内容，不需要 seo！

使用 next 的核心思想是，csr 为主，ssr 为辅！重 csr，轻 ssr！

### next 项目设计思路

1. 登录后 token 存入 localstorage。
2. 封装一个接口请求函数，自动携带 token。
3. 代理服务端 catch 错误，客户端 response 拦截器 rethrow。
4. 服务端渲染需要 seo 的接口。客户端请求初始化数据接口。
5. 每个组件模块提供当数据为空时的占位显示，并同时提供 loading 动画。
